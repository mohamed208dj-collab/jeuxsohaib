<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ 2026 | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #3b82f6; --accent: #8b5cf6; --bg: #0f172a; }
        body { font-family: 'Tajawal', sans-serif; background: #f8fafc; color: #1e293b; transition: 0.3s; }
        
        /* Dark Mode Styles */
        body.dark { background: #0b0f1a; color: #f1f5f9; }
        body.dark .card { background: #161d2f; border-color: #2d3748; }

        /* Custom UI Elements */
        .card { background: white; border-radius: 2rem; border: 1px solid rgba(0,0,0,0.05); transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card:hover { transform: translateY(-5px); shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
        .btn-ai { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; }
        .progress-bar { height: 8px; border-radius: 10px; background: #edf2f7; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #3b82f6, #8b5cf6); transition: width 0.8s; }
        
        .hidden-section { display: none; }
        .checked { text-decoration: line-through; opacity: 0.5; }
        
        /* Glass Effect */
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); }
        body.dark .glass { background: rgba(22, 29, 47, 0.8); }
    </style>
</head>
<body class="min-h-screen">

    <section id="loginScreen" class="fixed inset-0 z-[999] flex items-center justify-center bg-slate-900 p-6">
        <div class="max-w-md w-full card p-10 text-center animate__animated animate__zoomIn">
            <div class="w-20 h-20 btn-ai rounded-3xl mx-auto mb-6 flex items-center justify-center text-4xl shadow-2xl shadow-blue-500/50">ğŸš€</div>
            <h1 class="text-4xl font-black mb-2">Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ 2026</h1>
            <p class="text-slate-400 mb-8 font-medium">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† Ø¨ØªÙ†Ø¸ÙŠÙ… Ù†Ø¬Ø§Ø­Ùƒ Ø¨Ø°ÙƒØ§Ø¡</p>
            <input type="text" id="studentName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…" 
                class="w-full p-5 rounded-2xl bg-slate-50 border-2 border-transparent focus:border-blue-500 outline-none text-center font-bold text-xl mb-4 transition-all">
            <button onclick="app.init()" class="w-full p-5 rounded-2xl btn-ai font-black text-xl shadow-xl hover:scale-[1.02] active:scale-95 transition-all">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
        </div>
    </section>

    <div id="mainUI" class="hidden-section flex flex-col lg:flex-row min-h-screen">
        
        <aside class="w-full lg:w-72 glass p-6 border-l border-slate-200 sticky top-0 h-screen z-50 flex flex-col">
            <div class="flex items-center gap-3 mb-10">
                <div class="w-10 h-10 btn-ai rounded-xl flex items-center justify-center font-black">M</div>
                <h2 class="text-xl font-black tracking-tighter">Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ OS</h2>
            </div>
            
            <nav class="space-y-3 flex-1">
                <button onclick="app.showSection('home')" class="w-full flex items-center gap-4 p-4 rounded-2xl bg-blue-50 text-blue-600 font-bold">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                <button onclick="app.toggleTheme()" class="w-full flex items-center gap-4 p-4 rounded-2xl hover:bg-slate-50 transition">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
                <div class="p-4 bg-slate-900 text-white rounded-3xl mt-6">
                    <p class="text-[10px] opacity-60 font-bold uppercase mb-1">Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨Ø§Ùƒ</p>
                    <div id="countdown" class="text-sm font-black">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..</div>
                </div>
            </nav>

            <div class="p-4 card bg-blue-50 border-none">
                <p class="text-[10px] font-bold text-blue-600 uppercase mb-2">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ±ÙƒÙŠØ² (XP)</p>
                <div class="progress-bar mb-2"><div id="xpFill" class="progress-fill" style="width: 20%"></div></div>
                <p class="text-xs font-black">Level: <span id="userLevel">1</span></p>
            </div>
        </aside>

        <main class="flex-1 p-4 md:p-8 overflow-y-auto">
            
            <header class="flex justify-between items-center mb-10">
                <div>
                    <h2 class="text-3xl font-black">Ø£Ù‡Ù„Ø§Ù‹ØŒ <span id="displayUserName" class="text-blue-600"></span> âœ¨</h2>
                    <p id="aiGreeting" class="text-slate-400 font-medium italic mt-1 text-sm">"Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ ÙŠÙˆÙ…Ùƒ..."</p>
                </div>
                <button onclick="app.logout()" class="text-red-500 font-bold text-sm bg-red-50 px-4 py-2 rounded-xl">Ø®Ø±ÙˆØ¬</button>
            </header>

            <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
                
                <div class="xl:col-span-2 space-y-8">
                    <div class="card p-8 bg-white text-center border-t-8 border-blue-600 shadow-xl">
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Focus Session</span>
                            <div class="flex gap-2" id="soundControls">
                                <button onclick="app.playSound('rain')" class="p-2 bg-slate-50 rounded-lg text-xs" title="ØµÙˆØª Ø§Ù„Ù…Ø·Ø±">ğŸŒ§ï¸</button>
                                <button onclick="app.playSound('coffee')" class="p-2 bg-slate-50 rounded-lg text-xs" title="Ù…Ù‚Ù‡Ù‰">â˜•</button>
                            </div>
                        </div>
                        <div class="text-8xl font-black mb-8 font-mono tracking-tighter" id="timer">25:00</div>
                        <div class="flex gap-4 justify-center">
                            <button id="timerBtn" onclick="app.toggleTimer()" class="px-12 py-4 btn-ai rounded-2xl font-black text-xl shadow-lg">Ø§Ø¨Ø¯Ø£</button>
                            <button onclick="app.resetTimer()" class="p-4 bg-slate-100 rounded-2xl">ğŸ”„</button>
                        </div>
                    </div>

                    <div>
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-black flex items-center gap-3">ğŸ“š Ù…Ø§Ø¯ÙŠ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© <span id="subjectCount" class="text-xs bg-slate-100 px-2 py-1 rounded-lg">0</span></h3>
                            <button onclick="app.addSubject()" class="text-blue-600 font-bold hover:underline">+ Ø¥Ø¶Ø§ÙØ©</button>
                        </div>
                        <div id="subjectGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            </div>
                    </div>
                </div>

                <div class="space-y-8">
                    <div class="card p-6 border-b-8 border-purple-500">
                        <h3 class="font-black text-lg mb-4 flex items-center gap-2">ğŸ¤– AI Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</h3>
                        <div id="aiBox" class="h-40 overflow-y-auto mb-4 text-sm space-y-3 p-2 bg-slate-50 rounded-2xl italic">
                            <div>Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„ÙŠÙˆÙ….</div>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="aiInput" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø£ÙŠ Ø´ÙŠØ¡.." class="flex-1 p-3 bg-slate-100 rounded-xl text-xs outline-none focus:ring-2 ring-purple-500/20">
                            <button onclick="app.askAI()" class="p-3 btn-ai rounded-xl">ğŸš€</button>
                        </div>
                    </div>

                    <div class="card p-6">
                        <h3 class="font-black text-lg mb-4">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ© âœ…</h3>
                        <div class="flex gap-2 mb-4">
                            <input type="text" id="todoInput" placeholder="Ø£Ø¶Ù Ù…Ù‡Ù…Ø©.." class="flex-1 p-3 bg-slate-50 rounded-xl text-sm outline-none">
                            <button onclick="app.addTodo()" class="px-4 btn-ai rounded-xl font-bold">+</button>
                        </div>
                        <div id="todoList" class="space-y-3 max-h-64 overflow-y-auto pr-2">
                            </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <audio id="bgAudio" loop></audio>

    <script>
        /**
         * Core Application Logic (app)
         * Ù…Ù†Ø¸Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© "Object Oriented"
         */
        const app = {
            // 1. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Data State)
            state: {
                userName: localStorage.getItem('bac_name') || '',
                subjects: JSON.parse(localStorage.getItem('bac_subjects')) || [],
                todos: JSON.parse(localStorage.getItem('bac_todos')) || [],
                xp: parseInt(localStorage.getItem('bac_xp')) || 0,
                timerSeconds: 25 * 60,
                timerId: null,
                isPlaying: false
            },

            // 2. Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Initialization)
            init() {
                const name = document.getElementById('studentName').value || this.state.userName;
                if (!name) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹.");
                
                this.state.userName = name;
                localStorage.setItem('bac_name', name);
                
                document.getElementById('loginScreen').classList.add('animate__animated', 'animate__fadeOut');
                setTimeout(() => {
                    document.getElementById('loginScreen').style.display = 'none';
                    document.getElementById('mainUI').classList.remove('hidden-section');
                    document.getElementById('displayUserName').innerText = name;
                    this.renderAll();
                    this.startCountdown();
                    this.aiSuggest();
                }, 500);
            },

            // 3. Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ØµØ±ÙŠ (Rendering)
            renderAll() {
                this.renderSubjects();
                this.renderTodos();
                this.updateXP();
            },

            renderSubjects() {
                const grid = document.getElementById('subjectGrid');
                grid.innerHTML = this.state.subjects.map((s, i) => `
                    <div class="card p-5 animate__animated animate__fadeInUp">
                        <div class="flex justify-between items-start mb-3">
                            <span class="text-2xl">ğŸ“š</span>
                            <button onclick="app.deleteSubject(${i})" class="text-red-400 text-xs">Ø­Ø°Ù</button>
                        </div>
                        <h4 class="font-black text-lg">${s.name}</h4>
                        <p class="text-slate-400 text-xs italic mb-4">${s.goal}</p>
                        <div class="progress-bar"><div class="progress-fill" style="width: ${s.progress}%"></div></div>
                    </div>
                `).join('');
                document.getElementById('subjectCount').innerText = this.state.subjects.length;
            },

            renderTodos() {
                const list = document.getElementById('todoList');
                list.innerHTML = this.state.todos.map((t, i) => `
                    <div class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl">
                        <span class="${t.done ? 'checked' : ''} font-bold text-sm cursor-pointer" onclick="app.toggleTodo(${i})">${t.text}</span>
                        <button onclick="app.deleteTodo(${i})" class="text-red-400 text-xs">Ã—</button>
                    </div>
                `).join('');
            },

            // 4. Ù…Ù†Ø·Ù‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (AI Engine)
            aiSuggest() {
                const greetings = [
                    "Ø§Ù„Ù€ AI ÙŠØ±Ù‰ Ø£Ù† Ø°Ø§ÙƒØ±ØªÙƒ Ø§Ù„Ø¢Ù† ÙÙŠ Ø£Ø­Ø³Ù† Ø­Ø§Ù„Ø§ØªÙ‡Ø§ØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª!",
                    "Ù„Ù‚Ø¯ Ø£Ù†Ø¬Ø²Øª Ø¹Ù…Ù„Ø§Ù‹ Ø±Ø§Ø¦Ø¹Ø§Ù‹ Ø¨Ø§Ù„Ø£Ù…Ø³ØŒ Ø§Ø³ØªÙ…Ø± Ø¨Ù†ÙØ³ Ø§Ù„ÙˆØªÙŠØ±Ø©.",
                    "Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆÙ‚ÙŠØªØŒ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¢Ù† ÙÙƒØ±Ø© Ø¹Ø¨Ù‚Ø±ÙŠØ©."
                ];
                document.getElementById('aiGreeting').innerText = greetings[Math.floor(Math.random()*greetings.length)];
            },

            askAI() {
                const input = document.getElementById('aiInput');
                const box = document.getElementById('aiBox');
                if(!input.value) return;

                const userMsg = input.value;
                box.innerHTML += `<div class="text-blue-600 font-bold">Ø£Ù†Øª: ${userMsg}</div>`;
                
                // Simulated AI Logic
                setTimeout(() => {
                    let reply = "Ø¨ØµÙØªÙŠ Ù…Ø³Ø§Ø¹Ø¯ÙƒØŒ Ø£Ù†ØµØ­Ùƒ Ø¨ØªÙ‚Ø³ÙŠÙ… Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø¥Ù„Ù‰ 3 Ø£Ø¬Ø²Ø§Ø¡ Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø­ÙØ¸.";
                    if(userMsg.includes("ØªØ¹Ø¨Øª")) reply = "Ø®Ø° Ù‚Ø³Ø·Ø§Ù‹ Ù…Ù† Ø§Ù„Ø±Ø§Ø­Ø©ØŒ Ø§Ù„Ù€ AI ÙŠÙˆØµÙŠ Ø¨Ù€ 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ø³ØªØ±Ø®Ø§Ø¡.";
                    box.innerHTML += `<div class="text-purple-600 font-black">AI: ${reply}</div>`;
                    box.scrollTop = box.scrollHeight;
                    this.gainXP(5);
                }, 600);
                input.value = '';
            },

            // 5. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¤Ù‚Øª ÙˆØ§Ù„Ø£ØµÙˆØ§Øª (Timer & Audio)
            toggleTimer() {
                const btn = document.getElementById('timerBtn');
                if(this.state.timerId) {
                    clearInterval(this.state.timerId);
                    this.state.timerId = null;
                    btn.innerText = "ÙˆØ§ØµÙ„";
                    btn.classList.replace('bg-red-500', 'btn-ai');
                } else {
                    this.state.timerId = setInterval(() => {
                        this.state.timerSeconds--;
                        this.updateTimerUI();
                        if(this.state.timerSeconds <= 0) {
                            clearInterval(this.state.timerId);
                            alert("Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ²! +20 XP");
                            this.gainXP(20);
                        }
                    }, 1000);
                    btn.innerText = "ØªÙˆÙ‚Ù";
                    btn.classList.add('bg-red-500');
                }
            },

            updateTimerUI() {
                const m = Math.floor(this.state.timerSeconds / 60);
                const s = this.state.timerSeconds % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
            },

            resetTimer() {
                clearInterval(this.state.timerId);
                this.state.timerId = null;
                this.state.timerSeconds = 25 * 60;
                this.updateTimerUI();
                document.getElementById('timerBtn').innerText = "Ø§Ø¨Ø¯Ø£";
            },

            playSound(type) {
                const audio = document.getElementById('bgAudio');
                const urls = {
                    'rain': 'https://www.soundjay.com/nature/rain-01.mp3',
                    'coffee': 'https://www.soundjay.com/misc/sounds/bell-ringing-01.mp3'
                };
                if(this.state.isPlaying) {
                    audio.pause();
                    this.state.isPlaying = false;
                } else {
                    audio.src = urls[type];
                    audio.play();
                    this.state.isPlaying = true;
                }
            },

            // 6. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (CRUD Operations)
            addSubject() {
                const name = prompt("Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©:");
                const goal = prompt("Ø§Ù„Ù‡Ø¯Ù Ù…Ù†Ù‡Ø§ØŸ");
                if(name && goal) {
                    this.state.subjects.push({ name, goal, progress: 10 });
                    this.save();
                    this.renderSubjects();
                    this.gainXP(10);
                }
            },

            deleteSubject(i) {
                this.state.subjects.splice(i, 1);
                this.save();
                this.renderSubjects();
            },

            addTodo() {
                const input = document.getElementById('todoInput');
                if(!input.value) return;
                this.state.todos.push({ text: input.value, done: false });
                this.save();
                this.renderTodos();
                input.value = '';
                this.gainXP(2);
            },

            toggleTodo(i) {
                this.state.todos[i].done = !this.state.todos[i].done;
                this.save();
                this.renderTodos();
            },

            deleteTodo(i) {
                this.state.todos.splice(i, 1);
                this.save();
                this.renderTodos();
            },

            // 7. Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª (System & Gamification)
            gainXP(amount) {
                this.state.xp += amount;
                this.updateXP();
                this.save();
            },

            updateXP() {
                const level = Math.floor(this.state.xp / 100) + 1;
                const progress = this.state.xp % 100;
                document.getElementById('userLevel').innerText = level;
                document.getElementById('xpFill').style.width = progress + "%";
            },

            save() {
                localStorage.setItem('bac_subjects', JSON.stringify(this.state.subjects));
                localStorage.setItem('bac_todos', JSON.stringify(this.state.todos));
                localStorage.setItem('bac_xp', this.state.xp);
            },

            startCountdown() {
                const exam = new Date("June 8, 2026 08:00:00").getTime();
                setInterval(() => {
                    const diff = exam - new Date().getTime();
                    const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    document.getElementById('countdown').innerText = `${d} ÙŠÙˆÙ… Ùˆ ${h} Ø³Ø§Ø¹Ø©`;
                }, 1000);
            },

            toggleTheme() { document.body.classList.toggle('dark'); },
            logout() { localStorage.clear(); location.reload(); }
        };

        // ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„Ø§Ù‹
        if(localStorage.getItem('bac_name')) app.init();
    </script>
</body>
</html>
