<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ OS | Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #3b82f6; --accent: #f43f5e; --dark-bg: #0f172a; }
        body { font-family: 'Tajawal', sans-serif; background: #f1f5f9; overflow-x: hidden; }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù€ Glassmorphism Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© */
        .glass-panel { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.4); border-radius: 2.5rem; }
        .dark .glass-panel { background: rgba(30, 41, 59, 0.7); border: 1px solid rgba(255, 255, 255, 0.1); }
        
        /* Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØª */
        .audio-wave { display: flex; align-items: flex-end; gap: 3px; height: 20px; }
        .wave-bar { width: 3px; background: var(--primary); animation: wave 1s infinite; }
        @keyframes wave { 0%, 100% { height: 5px; } 50% { height: 20px; } }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª */
        .xp-bar { height: 8px; background: #e2e8f0; border-radius: 10px; overflow: hidden; }
        .xp-progress { height: 100%; background: linear-gradient(90deg, #3b82f6, #8b5cf6); transition: width 0.5s; }
        
        .hidden-section { display: none; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
    </style>
</head>
<body class="min-h-screen text-slate-800 transition-colors duration-500">

    <section id="loginPage" class="fixed inset-0 z-[9999] bg-slate-900 flex items-center justify-center p-6 overflow-hidden">
        <div class="absolute inset-0 opacity-20">
            <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-blue-600 rounded-full blur-[120px]"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-purple-600 rounded-full blur-[120px]"></div>
        </div>
        <div class="max-w-md w-full glass-panel p-10 text-center animate__animated animate__zoomIn relative z-10">
            <h1 class="text-5xl font-black text-white mb-2 tracking-tighter">Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ<span class="text-blue-500">OS</span></h1>
            <p class="text-slate-400 mb-8 font-bold">Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§ Ø§Ù„Ø°ÙƒÙŠ</p>
            <input type="text" id="nameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" 
                class="w-full p-5 rounded-2xl bg-slate-800 text-white border-2 border-slate-700 focus:border-blue-500 outline-none text-center font-bold mb-4 shadow-2xl transition-all">
            <button onclick="bootSystem()" class="w-full p-5 rounded-2xl bg-blue-600 text-white font-black text-xl hover:bg-blue-500 transition-all transform active:scale-95 shadow-lg shadow-blue-500/30">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… ..</button>
        </div>
    </section>

    <div id="systemMain" class="hidden-section flex flex-col lg:flex-row min-h-screen">
        
        <aside class="w-full lg:w-24 bg-white dark:bg-slate-900 border-l border-slate-200 flex flex-col items-center py-10 gap-8 z-50">
            <div class="w-12 h-12 bg-blue-600 rounded-2xl shadow-lg flex items-center justify-center text-white text-xl font-black">M</div>
            <nav class="flex flex-col gap-6">
                <button title="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" class="p-4 rounded-2xl bg-blue-50 text-blue-600">ğŸ </button>
                <button title="Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ" onclick="showAIScheduler()" class="p-4 rounded-2xl text-slate-400 hover:bg-slate-50 transition">ğŸ¤–</button>
                <button title="Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰" onclick="toggleMusic()" class="p-4 rounded-2xl text-slate-400 hover:bg-slate-50 transition">ğŸµ</button>
                <button title="Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª" onclick="showTrophies()" class="p-4 rounded-2xl text-slate-400 hover:bg-slate-50 transition">ğŸ†</button>
            </nav>
            <button onclick="toggleDark()" class="mt-auto p-4 rounded-2xl bg-slate-100">ğŸŒ™</button>
        </aside>

        <main class="flex-1 p-6 md:p-10 space-y-8 overflow-y-auto">
            
            <div class="flex flex-wrap justify-between items-center gap-6 bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-100">
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <img src="https://ui-avatars.com/api/?name=User&background=3b82f6&color=fff" id="userAvatar" class="w-14 h-14 rounded-2xl" alt="avatar">
                        <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 border-4 border-white rounded-full"></div>
                    </div>
                    <div>
                        <h2 class="text-xl font-black">Ø£Ù‡Ù„Ø§Ù‹ <span id="userNameDisplay">Ø£Ù…ÙŠÙ†</span></h2>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-[10px] font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full uppercase">Level 12 - Advanced</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex-1 max-w-xs px-4">
                    <p class="text-[10px] font-bold text-slate-400 mb-1 uppercase text-right">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ±ÙƒÙŠØ² (XP)</p>
                    <div class="xp-bar"><div id="xpProgress" class="xp-progress" style="width: 45%"></div></div>
                </div>

                <div class="flex items-center gap-4">
                    <div class="text-right">
                        <p class="text-[10px] font-bold text-slate-400 uppercase">Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ</p>
                        <p id="countdown" class="font-mono font-black text-slate-800">124D : 02H : 15M</p>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <div class="lg:col-span-2 space-y-8">
                    <div class="glass-panel p-8 relative overflow-hidden group">
                        <div class="absolute top-0 right-0 p-10 opacity-5 group-hover:scale-110 transition-transform">ğŸ¤–</div>
                        <h3 class="text-2xl font-black mb-6 flex items-center gap-3">
                            <span class="p-2 bg-blue-600 rounded-xl text-white text-sm">AI</span>
                            Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ
                        </h3>
                        <div id="aiChat" class="h-48 overflow-y-auto mb-6 space-y-4 p-2 font-medium text-sm">
                            <div class="p-4 bg-slate-50 rounded-2xl text-slate-600 border-r-4 border-blue-500">
                                Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø². Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¦Ùƒ Ø¨Ø§Ù„Ø£Ù…Ø³ØŒ Ø£Ù†ØµØ­Ùƒ Ø¨Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡" Ø§Ù„ÙŠÙˆÙ… Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹ØªÙŠÙ†.
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="aiInput" placeholder="Ø§Ø³Ø£Ù„ Ø§Ù„Ù€ AI Ø¹Ù† Ù†ØµÙŠØ­Ø© Ø£Ùˆ Ø®Ø·Ø©.." class="flex-1 p-4 rounded-2xl bg-slate-50 outline-none border border-transparent focus:border-blue-200">
                            <button onclick="askAI()" class="p-4 bg-blue-600 text-white rounded-2xl shadow-lg">ğŸš€</button>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div class="flex justify-between items-center px-4">
                            <h3 class="text-xl font-black">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯</h3>
                            <button onclick="addNewSubject()" class="text-blue-600 font-bold">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø©</button>
                        </div>
                        <div id="subjectsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            </div>
                    </div>
                </div>

                <div class="space-y-8">
                    <div class="glass-panel p-8 text-center border-t-8 border-blue-600 shadow-xl">
                        <p class="text-[10px] font-bold text-slate-400 mb-6 tracking-widest uppercase">Deep Focus Mode</p>
                        <div class="text-7xl font-mono font-black mb-8 text-slate-800" id="timer">25:00</div>
                        <div class="flex gap-3">
                            <button id="timerBtn" onclick="toggleTimer()" class="flex-1 py-4 bg-blue-600 text-white rounded-2xl font-black shadow-lg shadow-blue-200">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
                            <button onclick="resetTimer()" class="p-4 bg-slate-100 rounded-2xl">ğŸ”„</button>
                        </div>
                    </div>

                    <div class="glass-panel p-6">
                        <h4 class="font-black text-sm mb-4 flex justify-between items-center">
                            Ø£ØµÙˆØ§Øª Ø§Ù„ØªØ±ÙƒÙŠØ² 
                            <div class="audio-wave" id="wave" style="display:none">
                                <div class="wave-bar"></div><div class="wave-bar" style="animation-delay:.2s"></div><div class="wave-bar" style="animation-delay:.4s"></div>
                            </div>
                        </h4>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="playFocus('rain')" class="p-3 bg-slate-50 rounded-xl text-xs font-bold hover:bg-blue-50 transition text-right">ğŸŒ§ï¸ ØµÙˆØª Ø§Ù„Ù…Ø·Ø±</button>
                            <button onclick="playFocus('lofi')" class="p-3 bg-slate-50 rounded-xl text-xs font-bold hover:bg-blue-50 transition text-right">ğŸ§ Lo-fi Beats</button>
                        </div>
                        <audio id="focusAudio" loop></audio>
                    </div>

                    <div class="p-6 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-[2.5rem] text-white shadow-xl">
                        <h4 class="font-black text-xl mb-1">Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ù…Ø§Ø³ ğŸ”¥</h4>
                        <p class="text-3xl font-black" id="streakCount">1,250</p>
                        <p class="text-[10px] opacity-80 mt-2 italic font-bold">Ø£Ù†Øª Ø¶Ù…Ù† Ø£ÙØ¶Ù„ 5% Ù…Ù† Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ù†ØµØ©!</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- System Boot Logic ---
        let xp = 45;
        let subjects = JSON.parse(localStorage.getItem('subjects_os')) || [];

        function bootSystem() {
            const name = document.getElementById('nameInput').value;
            if(!name) return alert("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„ÙˆÙ„ÙˆØ¬ Ù„Ù„Ù†Ø¸Ø§Ù….");
            
            localStorage.setItem('user_os', name);
            document.getElementById('loginPage').classList.add('animate__animated', 'animate__fadeOut');
            setTimeout(() => {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('systemMain').classList.remove('hidden-section');
                document.getElementById('userNameDisplay').innerText = name;
                document.getElementById('userAvatar').src = `https://ui-avatars.com/api/?name=${name}&background=3b82f6&color=fff`;
                initSystem();
            }, 600);
        }

        // --- AI Personal Assistant ---
        const aiMemory = [
            "ØªØ°ÙƒØ± Ø£Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙØ¹Ø§Ù„Ø© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªÙ‚Ù†ÙŠØ© 'ÙÙŠÙ…Ø§Ù†'ØŒ Ø§Ø´Ø±Ø­ Ø§Ù„Ø¯Ø±Ø³ Ù„Ø²Ù…ÙŠÙ„ ØªØ®ÙŠÙ„ÙŠ.",
            "Ù†Ø³Ø¨Ø© ØªØ±ÙƒÙŠØ²Ùƒ ØªØ±ØªÙØ¹ Ø§Ù„Ø¢Ù†ØŒ Ø£Ù†ØµØ­Ùƒ Ø¨Ø­Ù„ ØªÙ…Ø±ÙŠÙ† Ø±ÙŠØ§Ø¶ÙŠØ§Øª ØµØ¹Ø¨.",
            "Ù„Ù‚Ø¯ Ø¯Ø±Ø³Øª 3 Ø³Ø§Ø¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…ØŒ Ø§Ù„Ù€ AI ÙŠÙˆØµÙŠ Ø¨Ø§Ø³ØªØ±Ø§Ø­Ø© Ù„Ù…Ø¯Ø© 15 Ø¯Ù‚ÙŠÙ‚Ø©."
        ];

        function askAI() {
            const input = document.getElementById('aiInput');
            const chat = document.getElementById('aiChat');
            if(!input.value) return;

            chat.innerHTML += `<div class="p-3 bg-blue-600 text-white rounded-2xl rounded-tr-none self-end ml-10 mb-2 animate__animated animate__fadeInRight">${input.value}</div>`;
            
            setTimeout(() => {
                const response = aiMemory[Math.floor(Math.random() * aiMemory.length)];
                chat.innerHTML += `<div class="p-3 bg-slate-100 rounded-2xl rounded-tl-none mr-10 mb-2 border border-slate-200 animate__animated animate__fadeInLeft">ğŸ¤– ${response}</div>`;
                chat.scrollTop = chat.scrollHeight;
                gainXP(5);
            }, 800);
            input.value = '';
        }

        // --- Gamification Logic (XP System) ---
        function gainXP(amount) {
            xp += amount;
            if(xp > 100) xp = 0; // Level Up simulation
            document.getElementById('xpProgress').style.width = xp + "%";
        }

        // --- Music Player Logic ---
        let isPlaying = false;
        function playFocus(type) {
            const audio = document.getElementById('focusAudio');
            const wave = document.getElementById('wave');
            const sources = {
                'rain': 'https://www.soundjay.com/nature/rain-01.mp3',
                'lofi': 'https://www.soundjay.com/misc/sounds/bell-ringing-01.mp3' // Placeholder
            };
            
            if(isPlaying) {
                audio.pause(); wave.style.display = 'none'; isPlaying = false;
            } else {
                audio.src = sources[type]; audio.play(); wave.style.display = 'flex'; isPlaying = true;
            }
        }

        // --- Timer Logic ---
        let timerSeconds = 25 * 60, timerId = null;
        function toggleTimer() {
            const btn = document.getElementById('timerBtn');
            if(timerId) {
                clearInterval(timerId); timerId = null; btn.innerText = "ÙˆØ§ØµÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©";
            } else {
                timerId = setInterval(() => {
                    timerSeconds--;
                    const m = Math.floor(timerSeconds/60), s = timerSeconds%60;
                    document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                    if(timerSeconds <= 0) { clearInterval(timerId); gainXP(20); alert("Ø¬Ù„Ø³Ø© Ù…ÙƒØªÙ…Ù„Ø©! +20 XP"); }
                }, 1000);
                btn.innerText = "ØªÙˆÙ‚Ù Ù…Ø¤Ù‚Øª";
            }
        }

        function resetTimer() {
            clearInterval(timerId); timerId = null; timerSeconds = 25 * 60;
            document.getElementById('timer').innerText = "25:00";
            document.getElementById('timerBtn').innerText = "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø©";
        }

        // --- Countdown ---
        function initSystem() {
            const examDate = new Date("June 8, 2026 08:00:00").getTime();
            setInterval(() => {
                const now = new Date().getTime();
                const diff = examDate - now;
                const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                document.getElementById('countdown').innerText = `${d}D : ${h}H : ${m}M`;
            }, 1000);
            renderSubjects();
        }

        function addNewSubject() {
            const n = prompt("Ø§Ù„Ù…Ø§Ø¯Ø©:"), l = prompt("Ø§Ù„Ù‡Ø¯Ù:");
            if(n && l) {
                subjects.push({n, l, p: 20});
                localStorage.setItem('subjects_os', JSON.stringify(subjects));
                renderSubjects();
                gainXP(10);
            }
        }

        function renderSubjects() {
            const grid = document.getElementById('subjectsGrid');
            grid.innerHTML = subjects.map((s, i) => `
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 hover:shadow-md transition group animate__animated animate__fadeInUp">
                    <div class="flex justify-between mb-4">
                        <span class="p-3 bg-blue-50 text-blue-600 rounded-2xl text-xl font-bold">${s.n.charAt(0)}</span>
                        <button onclick="deleteSub(${i})" class="opacity-0 group-hover:opacity-100 text-red-400 text-xs transition">Ø­Ø°Ù</button>
                    </div>
                    <h4 class="font-black text-slate-800">${s.n}</h4>
                    <p class="text-[10px] text-slate-400 font-bold mb-4 uppercase">${s.l}</p>
                    <div class="xp-bar"><div class="xp-progress" style="width: ${s.p}%"></div></div>
                </div>
            `).join('');
        }

        function deleteSub(i) {
            subjects.splice(i, 1);
            localStorage.setItem('subjects_os', JSON.stringify(subjects));
            renderSubjects();
        }

        function toggleDark() { document.body.classList.toggle('dark'); }

        // Auto-login if exists
        if(localStorage.getItem('user_os')) bootSystem();
    </script>
</body>
</html>
